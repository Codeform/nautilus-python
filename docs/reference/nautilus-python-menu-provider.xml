<?xml version="1.0" standalone="no"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN"
    "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">

<refentry id="class-nautilus-python-menu-provider">
  <refnamediv>
    <refname>nautilus.MenuProvider</refname>
    <refpurpose>nautilus.MenuProvider Reference</refpurpose>
  </refnamediv>

<!-- ******************************* -->
<!-- BEGIN OF SYNOPSIS -->
<!-- ******************************* -->

  <refsect1>
    <title>Synopsis</title>

    <classsynopsis language="python">
      <ooclass><classname>nautilus.MenuProvider</classname></ooclass>

      <methodsynopsis language="python">
        <methodname><link linkend="method-nautilus-python-menu-provider--get-file-items">get_file_items</link></methodname>
        <methodparam><parameter role="keyword">window</parameter></methodparam>
        <methodparam><parameter role="keyword">files</parameter></methodparam>
      </methodsynopsis>

      <methodsynopsis language="python">
        <methodname><link linkend="method-nautilus-python-menu-provider--get-file-items-full">get_file_items_full</link></methodname>
        <methodparam><parameter role="keyword">provider</parameter></methodparam>
        <methodparam><parameter role="keyword">window</parameter></methodparam>
        <methodparam><parameter role="keyword">files</parameter></methodparam>
      </methodsynopsis>

      <methodsynopsis language="python">
        <methodname><link linkend="method-nautilus-python-menu-provider--get-background-items">get_background_items</link></methodname>
        <methodparam><parameter role="keyword">window</parameter></methodparam>
        <methodparam><parameter role="keyword">folder</parameter></methodparam>
      </methodsynopsis>

      <methodsynopsis language="python">
        <methodname><link linkend="method-nautilus-python-menu-provider--get-background-items-full">get_background_items_full</link></methodname>
        <methodparam><parameter role="keyword">provider</parameter></methodparam>
        <methodparam><parameter role="keyword">window</parameter></methodparam>
        <methodparam><parameter role="keyword">folder</parameter></methodparam>
      </methodsynopsis>

      <methodsynopsis language="python">
        <methodname><link linkend="method-nautilus-python-menu-provider--get-toolbar-items">get_toolbar_items</link></methodname>
        <methodparam><parameter role="keyword">window</parameter></methodparam>
        <methodparam><parameter role="keyword">folder</parameter></methodparam>
      </methodsynopsis>

      <methodsynopsis language="python">
        <methodname><link linkend="method-nautilus-python-menu-provider--get-toolbar-items-full">get_toolbar_items_full</link></methodname>
        <methodparam><parameter role="keyword">provider</parameter></methodparam>
        <methodparam><parameter role="keyword">window</parameter></methodparam>
        <methodparam><parameter role="keyword">folder</parameter></methodparam>
      </methodsynopsis>

      <methodsynopsis language="python">
        <methodname><link linkend="method-nautilus-python-menu-provider--emit-items-updated-signal">emit_items_updated_signal</link></methodname>
        <methodparam><parameter role="keyword">provider</parameter></methodparam>
      </methodsynopsis>
    </classsynopsis>
  </refsect1>

<!-- ********************************** -->
<!-- BEGIN OF DESCRIPTION -->
<!-- ********************************** -->

  <refsect1 id="description-menu-provider">
    <title>Description</title>

      <para>
        An extension that sub-classes <link linkend="class-nautilus-python-menu-provider"><classname>nautilus.MenuProvider</classname></link>
        will be asked to provide a list of menu items back to Nautilus, which are then attached to various menus.  Nautilus expects at least one of
        the following methods to be defined (or their *_full variants): get_file_items, get_background_items, or get_toolbar_items.
        </para>

<example>
    <title>nautilus.MenuProvider Example</title>
    <programlisting>
import os
import urllib

import gtk
import nautilus
import gconf

TERMINAL_KEY = '/desktop/gnome/applications/terminal/exec'

class OpenTerminalExtension(nautilus.MenuProvider):
    def __init__(self):
        self.client = gconf.client_get_default()
        
    def _open_terminal(self, file):
        filename = urllib.unquote(file.get_uri()[7:])
        terminal = self.client.get_string(TERMINAL_KEY)

        os.chdir(filename)
        os.system('%s &amp;' % terminal)
        
    def menu_activate_cb(self, menu, file):
        self._open_terminal(file)
        
    def menu_background_activate_cb(self, menu, file): 
        self._open_terminal(file)
       
    def get_file_items(self, window, files):
        if len(files) != 1:
            return
        
        file = files[0]
        if not file.is_directory() or file.get_uri_scheme() != 'file':
            return
        
        item = nautilus.MenuItem('NautilusPython::openterminal_file_item',
                                 'Open Terminal' ,
                                 'Open Terminal In %s' % file.get_name())
        item.connect('activate', self.menu_activate_cb, file)
        return item,

    def get_background_items(self, window, file):
        item = nautilus.MenuItem('NautilusPython::openterminal_item',
                                 'Open Terminal Here',
                                 'Open Terminal In This Directory')
        item.connect('activate', self.menu_background_activate_cb, file)
        return item,
    </programlisting>
</example>
        
        
<!-- ****************************************** -->
<!-- BEGIN OF SIGNAL PROTOTYPES -->
<!-- ****************************************** -->

<refsect1>
    <title>Signals</title>
    <variablelist>
      <varlistentry>
        <term><link linkend="signal-nautilus-python-menu-provider--items-updated">"items-updated"</link></term>
        <listitem>
          <methodsynopsis language="python"><methodname>callback</methodname>
          </methodsynopsis>
        </listitem>
      </varlistentry>
    </variablelist>
</refsect1>
        
        
  </refsect1>

<!-- ****************************** -->
<!-- BEGIN OF METHODS -->
<!-- ****************************** -->

  <refsect1>
        <title>Expected Methods</title>

        <refsect2 id="method-nautilus-python-menu-provider--get-file-items">
          <title>nautilus.MenuProvider.get_file_items</title>

          <programlisting><methodsynopsis language="python">
            <methodname>get_file_items</methodname>
            <methodparam><parameter role="keyword">window</parameter></methodparam>
            <methodparam><parameter role="keyword">files</parameter></methodparam>
          </methodsynopsis></programlisting>

          <variablelist>
            <varlistentry>
                <term><parameter role="keyword">window</parameter>&nbsp;:</term>
                <listitem><simpara>the current <link linkend="class-gtkwindow"><classname>gtk.Window</classname></link> instance</simpara></listitem>
            </varlistentry>
            <varlistentry>
                <term><parameter role="keyword">menu</parameter>&nbsp;:</term>
                <listitem><simpara>a list of <link linkend="class-nautilus-python-file-info"><classname>nautilus.FileInfo</classname></link> objects.</simpara></listitem>
            </varlistentry>
            <varlistentry>
                <term><emphasis>Returns</emphasis>&nbsp;:</term>
                <listitem><simpara>a list of <link linkend="class-nautilus-python-menu-item"><classname>nautilus.MenuItem</classname></link> objects</simpara></listitem>
            </varlistentry>
          </variablelist>

          <para>
            The <methodname>get_file_items</methodname>() method returns a list of
            <link linkend="class-nautilus-python-menu-item"><classname>nautilus.MenuItem</classname></link> objects.
          </para>
        </refsect2>

        <refsect2 id="method-nautilus-python-menu-provider--get-file-items-full">
          <title>nautilus.MenuProvider.get_file_items_full</title>

          <programlisting><methodsynopsis language="python">
            <methodname>get_file_items_full</methodname>
            <methodparam><parameter role="keyword">provider</parameter></methodparam>
            <methodparam><parameter role="keyword">window</parameter></methodparam>
            <methodparam><parameter role="keyword">files</parameter></methodparam>
          </methodsynopsis></programlisting>

          <variablelist>
            <varlistentry>
                <term><parameter role="keyword">provider</parameter>&nbsp;:</term>
                <listitem><simpara>the current <link linkend="class-nautilus-python-menu-provider"><classname>nautilus.MenuProvider</classname></link> instance</simpara></listitem>
            </varlistentry>
            <varlistentry>
                <term><parameter role="keyword">window</parameter>&nbsp;:</term>
                <listitem><simpara>the current <link linkend="class-gtkwindow"><classname>gtk.Window</classname></link> instance</simpara></listitem>
            </varlistentry>
            <varlistentry>
                <term><parameter role="keyword">files</parameter>&nbsp;:</term>
                <listitem><simpara>a list of <link linkend="class-nautilus-python-file-info"><classname>nautilus.FileInfo</classname></link> objects.</simpara></listitem>
            </varlistentry>
            <varlistentry>
                <term><emphasis>Returns</emphasis>&nbsp;:</term>
                <listitem><simpara>a list of <link linkend="class-nautilus-python-menu-item"><classname>nautilus.MenuItem</classname></link> objects</simpara></listitem>
            </varlistentry>
          </variablelist>

          <para>
            The <methodname>get_file_items_full</methodname>() method returns a list of
            <link linkend="class-nautilus-python-menu-item"><classname>nautilus.MenuItem</classname> objects</link>.
          </para>
          <para>
            This method was created in order to allow extension writers to call the 
            <link linkend="method-nautilus-menu-provider--emit_items_updated_signal">nautilus.MenuProvider.emit_items_updated_signal</link>, which must
            be passed the current provider instance.
          </para>
        </refsect2>


        <refsect2 id="method-nautilus-python-menu-provider--get-background-items">
          <title>nautilus.MenuProvider.get_background_items</title>

          <programlisting><methodsynopsis language="python">
            <methodname>get_background_items</methodname>
            <methodparam><parameter role="keyword">window</parameter></methodparam>
            <methodparam><parameter role="keyword">folder</parameter></methodparam>
          </methodsynopsis></programlisting>

          <variablelist>
            <varlistentry>
                <term><parameter role="keyword">window</parameter>&nbsp;:</term>
                <listitem><simpara>the current <link linkend="class-gtkwindow"><classname>gtk.Window</classname></link> instance</simpara></listitem>
            </varlistentry>
            <varlistentry>
                <term><parameter role="keyword">folder</parameter>&nbsp;:</term>
                <listitem><simpara>the current folder, as a <link linkend="class-nautilus-python-file-info"><classname>nautilus.FileInfo</classname></link> object.</simpara></listitem>
            </varlistentry>
            <varlistentry>
                <term><emphasis>Returns</emphasis>&nbsp;:</term>
                <listitem><simpara>a list of <link linkend="class-nautilus-python-menu-item"><classname>nautilus.MenuItem</classname></link> objects</simpara></listitem>
            </varlistentry>
          </variablelist>

          <para>
            The <methodname>get_background_items</methodname>() method returns a list of
            <link linkend="class-nautilus-python-menu-item"><classname>nautilus.MenuItem</classname> objects</link>.
          </para>
        </refsect2>

        <refsect2 id="method-nautilus-python-menu-provider--get-background-items-full">
          <title>nautilus.MenuProvider.get_background_items_full</title>

          <programlisting><methodsynopsis language="python">
            <methodname>get_background_items_full</methodname>
            <methodparam><parameter role="keyword">provider</parameter></methodparam>
            <methodparam><parameter role="keyword">window</parameter></methodparam>
            <methodparam><parameter role="keyword">folder</parameter></methodparam>
          </methodsynopsis></programlisting>

          <variablelist>
            <varlistentry>
                <term><parameter role="keyword">provider</parameter>&nbsp;:</term>
                <listitem><simpara>the current <link linkend="class-nautilus-python-menu-provider"><classname>nautilus.MenuProvider</classname></link> instance</simpara></listitem>
            </varlistentry>
            <varlistentry>
                <term><parameter role="keyword">window</parameter>&nbsp;:</term>
                <listitem><simpara>the current <link linkend="class-gtkwindow"><classname>gtk.Window</classname></link> instance</simpara></listitem>
            </varlistentry>
            <varlistentry>
                <term><parameter role="keyword">folder</parameter>&nbsp;:</term>
                <listitem><simpara>the current folder, as a <link linkend="class-nautilus-python-file-info"><classname>nautilus.FileInfo</classname></link> object.</simpara></listitem>
            </varlistentry>
            <varlistentry>
                <term><emphasis>Returns</emphasis>&nbsp;:</term>
                <listitem><simpara>a list of <link linkend="class-nautilus-python-menu-item"><classname>nautilus.MenuItem</classname></link> objects</simpara></listitem>
            </varlistentry>
          </variablelist>

          <para>
            The <methodname>get_background_items_full</methodname>() method returns a list of
            <link linkend="class-nautilus-python-menu-item"><classname>nautilus.MenuItem</classname> objects</link>.
          </para>
          <para>
            This method was created in order to allow extension writers to call the 
            <link linkend="method-nautilus-menu-provider--emit_items_updated_signal">nautilus.MenuProvider.emit_items_updated_signal</link>, which must
            be passed the current provider instance.
          </para>
        </refsect2>


        <refsect2 id="method-nautilus-python-menu-provider--get-toolbar-items">
          <title>nautilus.MenuProvider.get_toolbar_items</title>

          <programlisting><methodsynopsis language="python">
            <methodname>get_toolbar_items</methodname>
            <methodparam><parameter role="keyword">window</parameter></methodparam>
            <methodparam><parameter role="keyword">folder</parameter></methodparam>
          </methodsynopsis></programlisting>

          <variablelist>
            <varlistentry>
                <term><parameter role="keyword">window</parameter>&nbsp;:</term>
                <listitem><simpara>the current <link linkend="class-gtkwindow"><classname>gtk.Window</classname></link> instance</simpara></listitem>
            </varlistentry>
            <varlistentry>
                <term><parameter role="keyword">folder</parameter>&nbsp;:</term>
                <listitem><simpara>the current folder, as a <link linkend="class-nautilus-python-file-info"><classname>nautilus.FileInfo</classname></link> object.</simpara></listitem>
            </varlistentry>
            <varlistentry>
                <term><emphasis>Returns</emphasis>&nbsp;:</term>
                <listitem><simpara>a list of <link linkend="class-nautilus-python-menu-item"><classname>nautilus.MenuItem</classname></link> objects</simpara></listitem>
            </varlistentry>
          </variablelist>

          <para>
            The <methodname>get_toolbar_items</methodname>() method returns a list of
            <link linkend="class-nautilus-python-menu-item"><classname>nautilus.MenuItem</classname> objects</link>.
          </para>
        </refsect2>

        <refsect2 id="method-nautilus-python-menu-provider--get-toolbar-items-full">
          <title>nautilus.MenuProvider.get_toolbar_items_full</title>

          <programlisting><methodsynopsis language="python">
            <methodname>get_toolbar_items_full</methodname>
            <methodparam><parameter role="keyword">provider</parameter></methodparam>
            <methodparam><parameter role="keyword">window</parameter></methodparam>
            <methodparam><parameter role="keyword">folder</parameter></methodparam>
          </methodsynopsis></programlisting>

          <variablelist>
            <varlistentry>
                <term><parameter role="keyword">provider</parameter>&nbsp;:</term>
                <listitem><simpara>the current <link linkend="class-nautilus-python-menu-provider"><classname>nautilus.MenuProvider</classname></link> instance</simpara></listitem>
            </varlistentry>
            <varlistentry>
                <term><parameter role="keyword">window</parameter>&nbsp;:</term>
                <listitem><simpara>the current <link linkend="class-gtkwindow"><classname>gtk.Window</classname></link> instance</simpara></listitem>
            </varlistentry>
            <varlistentry>
                <term><parameter role="keyword">folder</parameter>&nbsp;:</term>
                <listitem><simpara>the current folder, as a <link linkend="class-nautilus-python-file-info"><classname>nautilus.FileInfo</classname></link> object.</simpara></listitem>
            </varlistentry>
            <varlistentry>
                <term><emphasis>Returns</emphasis>&nbsp;:</term>
                <listitem><simpara>a list of <link linkend="class-nautilus-python-menu-item"><classname>nautilus.MenuItem</classname></link> objects</simpara></listitem>
            </varlistentry>
          </variablelist>

          <para>
            The <methodname>get_toolbar_items_full</methodname>() method returns a list of
            <link linkend="class-nautilus-python-menu-item"><classname>nautilus.MenuItem</classname> objects</link>.
          </para>
          <para>
            This method was created in order to allow extension writers to call the 
            <link linkend="method-nautilus-menu-provider--emit_items_updated_signal">nautilus.MenuProvider.emit_items_updated_signal</link>, which must
            be passed the current provider instance.
          </para>
        </refsect2>
    </refsect1>

    <refsect1>
        <title>Public Methods</title>

        <refsect2 id="method-nautilus-python-menu-provider--emit-items-updated-signal">
          <title>nautilus.MenuProvider.emit_items_updated_signal</title>

          <programlisting><methodsynopsis language="python">
            <methodname>emit_items_updated_signal</methodname>
            <methodparam><parameter role="keyword">provider</parameter></methodparam>
          </methodsynopsis></programlisting>

          <variablelist>
            <varlistentry>
                <term><parameter role="keyword">provider</parameter>&nbsp;:</term>
                <listitem><simpara>the current <link linkend="class-nautilus-python-menu-provider"><classname>nautilus.MenuProvider</classname></link> instance</simpara></listitem>
            </varlistentry>
          </variablelist>

          <para>
            Emits the "<link linkend="signal-nautilus-python-menu-provider--items-updated">items-updated</link>" signal.
          </para>
        </refsect2>        
    </refsect1>



<!-- ******************************** -->
<!-- BEGIN OF SIGNAL DETAILS -->
<!-- ******************************** --> 
 
<refsect1>
    <title>Signal Details</title>

  <refsect2 id="signal-nautilus-python-menu-provider--items-updated">
    <title>The "items-updated" nautilus.MenuProvider Signal</title>

    <para>
      Emits the "<link linkend="signal-nautilus-python-menu-provider--items-updated">items-updated</link>" signal.
    </para>

  </refsect2>
</refsect1>


</refentry>

