2008-05-31  German Poo-Caaman~o  <gpoo@gnome.org>

	* src/nautilus.defs: Sync the binding with libnautilus-extension.
	Fixes #518824 (James Westby)

=== 0.5.0 ===
2008-01-11  Johan Dahlin  <johan@gnome.org>

	* NEWS: Update

	* examples/Makefile.am:
	* src/nautilus-python.c: (nautilus_python_init_python):
	* src/nautilus-python.h:
	* src/nautilus.defs:
	* examples/submenu.py:
	Add Menu wrapper which makes it possible to implement submenus.
	#440026, Lukáš Lalinský, Sylvain Baubeau, Erik Wien

2008-01-11  Scott Tsai  <scottt.tw@gmail.com>

	reviewed by: Johan Dahlin

	* src/nautilusmodule.c (DL_EXPORT): 
	Initialize gnomevfs, which will prevent nautilus-python from freezing.
	Fixes #500996

2008-01-01  Brian Pepple  <bpepple@fedoraproject.org>

	reviewed by: Johan Dahlin

	* src/Makefile.am (nautilus_extensiondir): 
	* configure.in (NAUTILUS_LIBDIR): Fetch nautilus
	extension dir from nautilus-extension.pc
	Fixes #506759

2008-01-11  Scott Tsai  <scottt.tw@gmail.com>

	reviewed by: Johan Dahlin

	* m4/python.m4 (py_exec_prefix): Allowing the PYTHON_LIB_LOC and 
	PYTHON_LIBS configure variables to be overriden.
	Fixes #505589

2008-01-11  Jonathan Rogers <jonner@teegra.net>

	reviewed by: Johan Dahlin

	* src/nautilus-python-object.c:
	* src/nautilus-python.c: (nautilus_python_load_file):
	* src/nautilus-python.h:
	Use Py_ssize_t instead of int, so nautilus-python works on Python 2.5
	fixes #444366	

2006-07-02  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* src/nautilus-python.c (nautilus_module_shutdown): Re-enable
	shutting down python to fix bug #345754.

2006-02-19  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* src/Makefile.am: Update to use PYTHON_LIBS/PYTHON_LIB_LOC.

	* m4/python.m4: Define also PYTHON_LIB_LOC.

	* configure.in: Use AM_CHECK_PYTHON_LIBS and remove a large chunk
	of code that is not really needed.

	* m4/python.m4: Copy-paste AM_CHECK_PYTHON_LIBS from gnome-python.

	* configure.in: Fix PY_LIB_LOC to point to $PY_EXEC_PREFIX/lib,
	which is where a normal (i.e. not distribution patched) python
	installation puts the shared library.

	* src/nautilus-python.c (nautilus_python_init_python): Use
	PY_LIB_LOC here to open the correct python library (for cases of
	prefix != /usr).

	* src/Makefile.am (PYTHON_LIBS): Use PY_LIB_LOC here.

	* configure.in: Remove -L from $PY_LIB_LOC.

	* src/nautilus-python.c (np_init_pygobject): Add a missing
	PyErr_Print(); for the case when _PyGObbject_API is not found.
	(np_init_pygtk): idem.

2006-02-18  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* src/nautilus-python.c (np_init_pygnomevfs): Copy-paste of
	init_pygnomevfs from pygnomevfs.h, but changing error handling to
	avoid Py_FatalError, so we don't crash nautilus if gnomevfs module
	is missing.
	(np_init_pygnomevfs): Convert macro to inline function, make it
	return TRUE/FALSE on success/failure.  Update rest of code to
	reflect these changes.
	(np_init_pygtk): idem.
	(np_init_pygobject): idem.
	(nautilus_python_init_python): Call np_init_pygnomevfs instead of
	init_pygnomevfs.

	* src/nautilus-python.h: Moved np_init_pygobject and
	np_init_pygtk to src/nautilus-python.c.

	* src/nautilus-python.c: Refactor to initialize nautilus-python on
	demand: python/pygtk/pygnomevfs are not initialized if no python
	extension is actually found.

=== 0.4.3 ===
2006-02-15  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* NEWS: Update.

	* configure.in: Bump version.

2006-02-15  Gustavo J. A. M. Carneiro  <gjc@inescporto.pt>

	* src/nautilus-python.c (nautilus_module_shutdown): Don't shutdown
	Python to avoid a bug that causes nautilus to crash.  We should
	fix this eventually, but for now...
	(nautilus_python_load_dir): Add directory to sys.path here.
	(nautilus_python_init_python): Don't manipulate sys.path here,
	except to add path for 'nautilus' module, everything else now
	taken care in nautilus_python_load_dir.  Should fix loading
	extensions from the nautilus system dir.

2006-02-14  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* src/nautilus-python.c,
	* src/nautilus-python.h: Make debugging messages be activated
	through the environment variable NAUTILUS_PYTHON_DEBUG, instead of
	the DEBUG preprocessor macro.

=== 0.4.2 ===
2006-02-10  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* NEWS: Update.

	* configure.in: Bump version to 0.4.2.

2006-02-10  Gustavo J. A. M. Carneiro  <gjc@inescporto.pt>

	* src/nautilus-python.c (nautilus_python_init_python):
	g_module_open libpythonX.Y.so, to make the symbols visible in
	global namespace.  Fixes #327739.

	* src/Makefile.am (INCLUDES): Define PYTHON_VERSION.

	* src/nautilusmodule.c: Missing #include <pygobject.h>.

2006-01-24  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* src/nautilus-python.h (np_init_pygobject): Don't try to set an
	exception if PyImport_ImportModule returns NULL.  Instead, print
	the current exception and issue a g_warning.
	(np_init_pygtk): idem.  PS: macros that return values behind your
	back are _EVIL_.

=== 0.4.1 ===
2005-09-22  Johan Dahlin  <johan@gnome.org>

	* configure.in:
	* examples/Makefile.am:
	Release 0.4.1

2005-08-28  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* examples/README.in: Indicate how you can also install extensions
	in the home dir.

2005-08-27  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* src/nautilus-python.c: s/np_init_pygnomevfs/init_pygnomevfs/
	 (forgotten from when pygnomevfs.h was removed).  Fix a bug
	 preventing loading of extensions from
	 $HOME/.nautilus/python-extensions.

2005-08-25  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	* examples/documentation.py: Remove note saying
	FileInfo.get_vfs_file_info was not implemented; it is not true at
	this moment.

	* src/pygnomevfs.h: Removed.  Now it is installed by gnome-python.

	* src/Makefile.am: Update to use NAUTILUS_PYTHON_{LIBS,CFLAGS}.
	(EXTRA_DIST): Remove pygnomevfs.h.

	* configure.in: Call PKG_CHECK_MODULES only one time, store
	LIBS/CFLAGS in NAUTILUS_PYTHON.

	* examples/Makefile.am: Don't install examples into extensions
	dir; they're only examples, not something the user normally would
	like to run.  Instead, they are installed into the package doc
	dir, along with documentation.py and a README.
	
	* examples/README.in: Add this small file explaining how to
	install the examples and how to run a private instance of nautilus
	for testing.

2005-08-25  Gustavo J. A. M. Carneiro  <gjc@gnome.org>

	reviewed by: Johan Dahlin

	* src/nautilus-python-object.c:
	(nautilus_python_object_get_property_pages),
	(nautilus_python_object_get_file_items),
	(nautilus_python_object_get_background_items),
	(nautilus_python_object_get_toolbar_items),
	(nautilus_python_object_update_file_info),
	(nautilus_python_object_instance_init): Assorted memory leak
	fixes.

=== 0.4.0 ===
2005-05-30  Johan Dahlin  <johan@gnome.org>

	* NEWS:
	* README:
	* configure.in: Bump version to 0.4.0

2005-05-30  Johan Dahlin  <johan@gnome.org>

	* src/nautilus-python.c: (nautilus_python_init_python):
	* src/nautilusmodule.c: (initnautilus): Use an environment variable to
	ensure the module is only imported from nautilus-python itself. 
	Fixes bug #161946

2005-05-17  Johan Dahlin  <jdahlin@async.com.br>

	* src/nautilus-python-object.c
	(nautilus_python_object_get_background_items): Release GIL state.

2005-03-21  Johan Dahlin  <johan@gnome.org>

        * src/pygnomevfs.h: Import gnomevfs instead of gnome.vfs

2005-01-08  Johan Dahlin  <johan@gnome.org>

	* src/nautilus.override
	(_wrap_nautilus_file_info_get_vfs_file_info): Wrap.

	* src/pygnomevfs.h: Add from gnome-python, since it's not installed.

	* src/nautilus-python.c (nautilus_python_init_python): Check
	.nautilus/python-extensions-2.	

	* src/nautilus-python-object.c: Thread fixes.

2004-12-11  Thomas Vander Stichele  <thomas at apestaart dot org>

	* Makefile.am:
	* README:
	* configure.in:
	* nautilus-python.spec.in:
	  add spec file

2004-10-08  Johan Dahlin  <johan@gnome.org>

	* src/nautilus-python.c (nautilus_python_load_file): Remove unused
	variables. Patch by Ross Burton.

	* nautilus-python.pc.in: Remove mono leftovers, and add pythondir
	so external packages know where it can install stuff. Patch by
	Ross Burton

2004-10-05  Johan Dahlin  <johan@gnome.org>

	* src/nautilus-python.c (nautilus_python_init_python): Use
	Py_IsInitialized instead of saving our own state.
	Call PySys_Argv, so functions inside python that excepts sys.argv
	to be non NULL work correctly without crashing.
	Also require PyGTK 2.4.0 in here. Should find a way of exporting
	it from configure.in
	
2004-10-04  Johan Dahlin  <johan@gnome.org>

	* examples/test.py: Remove, it shouldn't really be here

	Imported to GNOME CVS

